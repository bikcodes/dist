(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function a(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function c(t){if(t.ep)return;t.ep=!0;const s=a(t);fetch(t.href,s)}})();function B(n){return fetch(n).then(e=>e.json()).then(e=>e)}function $(n,e,a,c,t){return n.results.filter(o=>{if(e!==""&&!o.title.toLowerCase().includes(e))return!1;if(a){const l=new Date(o.published_at).toDateString(),r=new Date(a).toDateString();if(l!==r)return!1}return!(c&&(!o.events||o.events.length===0)||t&&(!o.launches||o.launches.length===0))})}function w(n){const e={};n.forEach(c=>{const t=c.news_site;e[t]?e[t]+=1:e[t]=1});const a=document.getElementById("source-chips");a&&(a.innerHTML=Object.entries(e).map(([c,t])=>`<div class="chip">${c} (${t})`).join("")+"</div>".repeat(Object.keys(e).length))}function C(n){const e=document.createElement("article");e.classList.add("container"),e.innerHTML=`
      <p>Title: ${n.title}</p>
      <p>URL: <a href="${n.url}" target="_blank">${n.url}</a></p>
      <p>Summary: ${n.summary}</p>
      <p>Source: ${n.source}</p>
      <p>Publish Date: ${n.publishDate}</p>
      <p>Has Event: ${n.hasEvent?"Yes":"No"}</p>
      <p>Has Launch: ${n.hasLaunch?"Yes":"No"}</p>
    `,document.querySelector("main").appendChild(e)}const _=document.getElementById("form");_.addEventListener("click",()=>{const n="https://hu-sd-sdu2fep1-studenten-2023.github.io/fep1-eindopdracht-bikcodes/src/view/pages/create-article-page.html",e=window.open(n,"Add Article Page","width=800,height=800");e.addEventListener("DOMContentLoaded",()=>{e.document.getElementById("addArticle").addEventListener("submit",c=>{c.preventDefault();const t=e.document.getElementById("title").value,s=e.document.getElementById("url").value,o=e.document.getElementById("summary").value,l=e.document.getElementById("source").value,r=e.document.getElementById("publishDate").value,d=e.document.getElementById("formEvent").checked?"Yes":"No",p=e.document.getElementById("formLaunch").checked?"Yes":"No",m={title:t,url:s,summary:o,source:l,publishDate:r,hasEvent:d,hasLaunch:p};e.close(),C(m)})})});const S="https://api.spaceflightnewsapi.net/v4/articles/",k="https://api.spaceflightnewsapi.net/v4/blogs/",O="https://api.spaceflightnewsapi.net/v4/reports/",R=document.querySelector("#display-data"),g=document.querySelector("#input"),N=document.getElementById("articleRadio"),y=document.getElementById("blogRadio"),E=document.getElementById("reportRadio"),v=document.getElementById("inputDate"),L=document.getElementById("hasEvent"),b=document.getElementById("hasLaunch");function i(){const n=g.value.toLowerCase().trim(),e=v.value,a=L.checked,c=b.checked,t=document.querySelector('input[name="article_Type"]:checked');let s=S;t===y?s=k:t===E&&(s=O),B(s).then(o=>{const l=$(o,n,e,a,c);w(l);const r={};l.forEach(d=>{const u=d.news_site,p=new Date(d.published_at);(!r[u]||p>r[u].publishedDate)&&(r[u]={publishedDate:p,image_url:d.image_url})});const f=l.map(d=>{const{title:u,summary:p,news_site:m,image_url:h}=d,I=r[m].image_url===h?`background-image: url(${h});`:"",D=r[m].image_url!==h?`<img src="${h}" alt="Image">`:"";return`
            <div class="container ${r[m].image_url===h?"newest":""}" style="${I}">
              <p>Title: ${u}</p>
              <p>Summary: ${p}</p>
              ${D}
            </div>
            <hr>
          `}).join("");R.innerHTML=f})}g.addEventListener("input",()=>{i()});N.addEventListener("click",i);y.addEventListener("click",i);E.addEventListener("click",i);v.addEventListener("input",i);L.addEventListener("change",i);b.addEventListener("change",i);i();
